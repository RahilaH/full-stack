<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Analogica | Enquiries</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        tealDark: '#064e3b',
        tealMid: '#0f766e',
        tealLight: '#99f6e4'
      }
    }
  }
}
</script>

<link rel="stylesheet" href="../css/logo.css">
<link rel="stylesheet" href="../css/enquiries.css">
</head>

<body class="bg-slate-100 font-sans">

<div class="flex min-h-screen">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo">
      <img src="../assets/images/icons/logos/certisurd.jpg" class="logo-img">
      <div class="logo-text">
        <h3>Certisured</h3>
        <span>Student Management</span>
      </div>
    </div>

    <nav class="menu">
      <a href="../pages/AdminDashboard.html" class="menu-item">ğŸ“Š Dashboard</a>
      <a href="../pages/enquiries.html" class="menu-item active">ğŸ“ Enquiries</a>
      <a href="../pages/enrollment.html" class="menu-item">ğŸ“ Enrollments</a>
      <a href="../pages/overdue.html" class="menu-item">âš ï¸ Overdue</a>
    </nav>
  </aside>

  <!-- MAIN -->
  <main class="flex-1 p-8">

    <div class="header">
      <h2 class="page-title">ENQUIRIES</h2>

      <div class="header-actions">
        <input id="searchInput" type="search" placeholder="Search enquiries..." class="search-input">
        <button id="uploadBtn" class="light">ğŸ“¤ Upload CSV</button>
        <button id="addEnquiryBtn" class="add">â• Add Enquiry</button>
      </div>
    </div>

    <!-- TABLE -->
    <div class="table-card">
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Program</th>
            <th>Status</th>
            <th>Dropout Reason</th>
          </tr>
        </thead>
        <tbody id="enquiryTable"></tbody>
      </table>
    </div>

  </main>
</div>

<input type="file" id="fileInput" accept=".csv,.xlsx,.xls" hidden>

<!-- MODAL -->
<div id="enquiryModal" class="modal">
  <div class="modal-content">
    <h3>Add Enquiry</h3>

    <form id="enquiryForm">
      <input id="name" required placeholder="Student Name">
      <input id="email" required placeholder="Email">
      <input id="course" placeholder="Course Interested">

      <!-- STATUS -->
      <select id="status">
        <option value="New">New</option>
        <option value="Enrolled">Enrolled</option>
        <option value="Dropout">Dropout</option>
      </select>

      <!-- DROPOUT REASON (DROPDOWN) -->
      <select id="dropout_reason" style="display:none">
        <option value="">Select Dropout Reason</option>
        <option value="Financial">Financial</option>
        <option value="Not Interested">Not Interested</option>
        <option value="Joined Elsewhere">Joined Elsewhere</option>
        <option value="Personal Reasons">Personal Reasons</option>
      </select>

      <div class="modal-actions">
        <button type="button" id="cancelBtn">Cancel</button>
        <button type="submit" class="add">Add</button>
      </div>
    </form>
  </div>
</div>

<script src="../js/enquiries.js"></script>

<!-- âœ… DROPDOWN LOGIC -->
<script>
  const statusSelect = document.getElementById("status");
  const reasonSelect = document.getElementById("dropout_reason");

  statusSelect.addEventListener("change", () => {
    if (statusSelect.value === "Dropout") {
      reasonSelect.style.display = "block";
      reasonSelect.required = true;
    } else {
      reasonSelect.style.display = "none";
      reasonSelect.required = false;
      reasonSelect.value = "";
    }
  });
</script>

</body>
</html>
